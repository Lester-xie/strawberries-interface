import React, { ReactNode } from 'react'
import styled from 'styled-components'
import { Heading, IconButton, Text, Flex, useModal, Svg } from '../../uikit'
import SettingsModal from './SettingsModal'
import RecentTransactionsModal from './RecentTransactionsModal'
import TranslatedText from '../TranslatedText'

interface PageHeaderProps {
  title: ReactNode
  description?: ReactNode
  children?: ReactNode
}

// TODO: use UI Kit
const CogIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    {/*<path*/}
    {/*  d="M19.43 12.98C19.47 12.66 19.5 12.34 19.5 12C19.5 11.66 19.47 11.34 19.43 11.02L21.54 9.37C21.73 9.22 21.78 8.95 21.66 8.73L19.66 5.27C19.54 5.05 19.27 4.97 19.05 5.05L16.56 6.05C16.04 5.65 15.48 5.32 14.87 5.07L14.49 2.42C14.46 2.18 14.25 2 14 2H9.99996C9.74996 2 9.53996 2.18 9.50996 2.42L9.12996 5.07C8.51996 5.32 7.95996 5.66 7.43996 6.05L4.94996 5.05C4.71996 4.96 4.45996 5.05 4.33996 5.27L2.33996 8.73C2.20996 8.95 2.26996 9.22 2.45996 9.37L4.56996 11.02C4.52996 11.34 4.49996 11.67 4.49996 12C4.49996 12.33 4.52996 12.66 4.56996 12.98L2.45996 14.63C2.26996 14.78 2.21996 15.05 2.33996 15.27L4.33996 18.73C4.45996 18.95 4.72996 19.03 4.94996 18.95L7.43996 17.95C7.95996 18.35 8.51996 18.68 9.12996 18.93L9.50996 21.58C9.53996 21.82 9.74996 22 9.99996 22H14C14.25 22 14.46 21.82 14.49 21.58L14.87 18.93C15.48 18.68 16.04 18.34 16.56 17.95L19.05 18.95C19.28 19.04 19.54 18.95 19.66 18.73L21.66 15.27C21.78 15.05 21.73 14.78 21.54 14.63L19.43 12.98ZM12 15.5C10.07 15.5 8.49996 13.93 8.49996 12C8.49996 10.07 10.07 8.5 12 8.5C13.93 8.5 15.5 10.07 15.5 12C15.5 13.93 13.93 15.5 12 15.5Z"*/}
    {/*  fill="currentColor"*/}
    {/*/>*/}
    <defs>
      <filter x="-13.5%" y="-10.2%" width="127.0%" height="120.3%" filterUnits="objectBoundingBox" id="filter-1">
        <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
        <feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
        <feColorMatrix values="0 0 0 0 0.909193841   0 0 0 0 0.850013083   0 0 0 0 0.858870067  0 0 0 0.504698427 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>
        <feMerge>
          <feMergeNode in="shadowMatrixOuter1"></feMergeNode>
          <feMergeNode in="SourceGraphic"></feMergeNode>
        </feMerge>
      </filter>
    </defs>
    <g id="页面-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
      <g id="交易1" transform="translate(-1173.000000, -421.000000)" fill="#E55268" fillRule="nonzero">
        <g id="表格" filter="url(#filter-1)" transform="translate(811.000000, 386.000000)">
          <g id="形状" transform="translate(362.000000, 35.000000)">
            <path d="M6.10496827,3.50382293 C6.28294858,3.20124026 6.60778395,3.01547749 6.95882991,3.01547749 L16.8644173,3.01547749 C17.2154632,3.01547749 17.5402986,3.20124026 17.7182789,3.50382293 L22.6710726,11.9235722 C22.8534066,12.2335567 22.8534066,12.6180143 22.6710726,12.9279988 L17.7182789,21.347748 C17.5402986,21.6503307 17.2154632,21.8360935 16.8644173,21.8360935 L6.95882991,21.8360935 C6.60778395,21.8360935 6.28294858,21.6503307 6.10496827,21.347748 L1.15217459,12.9279988 C0.969840539,12.6180143 0.969840539,12.2335567 1.15217459,11.9235722 L6.10496827,3.50382293 Z M7.5254295,4.99659495 L3.15508436,12.4257855 L7.5254295,19.854976 L16.2978177,19.854976 L20.6681628,12.4257855 L16.2978177,4.99659495 L7.5254295,4.99659495 Z"></path>
            <path d="M8.44466802,12.4257855 C8.44466802,10.5110388 9.9968769,8.95882991 11.9116236,8.95882991 C13.8263703,8.95882991 15.3785792,10.5110388 15.3785792,12.4257855 C15.3785792,14.3405322 13.8263703,15.8927411 11.9116236,15.8927411 C9.9968769,15.8927411 8.44466802,14.3405322 8.44466802,12.4257855 L8.44466802,12.4257855 Z M11.9116236,10.9399474 C11.0910179,10.9399474 10.4257855,11.6051798 10.4257855,12.4257855 C10.4257855,13.2463912 11.0910179,13.9116236 11.9116236,13.9116236 C12.7322293,13.9116236 13.3974617,13.2463912 13.3974617,12.4257855 C13.3974617,11.6051798 12.7322293,10.9399474 11.9116236,10.9399474 Z"></path>
          </g>
        </g>
      </g>
    </g>
  </svg>
)

const HistoryIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    {/*<path*/}
    {/*  d="M13 3C8.03 3 4 7.03 4 12H1L4.89 15.89L4.96 16.03L9 12H6C6 8.13 9.13 5 13 5C16.87 5 20 8.13 20 12C20 15.87 16.87 19 13 19C11.07 19 9.32 18.21 8.06 16.94L6.64 18.36C8.27 19.99 10.51 21 13 21C17.97 21 22 16.97 22 12C22 7.03 17.97 3 13 3ZM12 8V13L16.28 15.54L17 14.33L13.5 12.25V8H12Z"*/}
    {/*  fill="currentColor"*/}
    {/*/>*/}
    <defs>
      <filter x="-13.5%" y="-10.2%" width="127.0%" height="120.3%" filterUnits="objectBoundingBox" id="filter-1">
        <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
        <feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
        <feColorMatrix values="0 0 0 0 0.909193841   0 0 0 0 0.850013083   0 0 0 0 0.858870067  0 0 0 0.504698427 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>
        <feMerge>
          <feMergeNode in="shadowMatrixOuter1"></feMergeNode>
          <feMergeNode in="SourceGraphic"></feMergeNode>
        </feMerge>
      </filter>
    </defs>
    <g id="页面-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
      <g id="交易1" transform="translate(-1217.000000, -421.000000)" fill="#E55268" fillRule="nonzero" stroke="#E55268" strokeWidth="0.5">
        <g id="表格" filter="url(#filter-1)" transform="translate(811.000000, 386.000000)">
          <g id="形状" transform="translate(406.000000, 35.000000)">
            <path d="M11.8745685,19.6798234 L4.79961716,19.6798234 C4.06758392,19.6790303 3.47435155,19.0857979 3.47355845,18.3537647 L3.47355845,4.79961716 C3.47474688,4.06774799 4.06774799,3.47474688 4.79961716,3.47355845 L15.4073673,3.47355845 C16.1392365,3.47474688 16.7322376,4.06774799 16.733426,4.79961716 L16.733426,7.57405143 C16.8909989,7.56397828 17.0413767,7.5265637 17.2018276,7.5265637 C17.5395908,7.53628975 17.8762237,7.5701935 18.209143,7.62801475 L18.209143,4.79889764 C18.2051826,3.25362947 16.9526387,2.00237226 15.4073673,2 L4.79961716,2 C3.25490856,2.00356061 2.00356061,3.25490856 2,4.79961716 L2,18.3544842 C2.00356062,19.8991928 3.25490856,21.1505407 4.79961716,21.1541013 L13.7870286,21.1541013 C13.0721749,20.772465 12.4258513,20.27447 11.8745685,19.6805429 L11.8745685,19.6798234 Z M13.7870301,7.21717398 C13.7874108,7.39641813 13.7164741,7.56845183 13.5898641,7.69533178 C13.4632541,7.82221173 13.2913719,7.89351429 13.1121273,7.89351429 L5.62129868,7.89351429 C5.44205413,7.89351429 5.2701719,7.82221174 5.14356191,7.69533179 C5.01695191,7.56845184 4.9460152,7.39641813 4.94639585,7.21717398 L4.94639585,7.09629615 C4.9460152,6.917052 5.01695191,6.74501829 5.14356191,6.61813834 C5.2701719,6.49125839 5.44205413,6.41995546 5.62129868,6.41995546 L13.1106883,6.41995546 C13.2901234,6.41976465 13.4622644,6.49096033 13.5891442,6.61784021 C13.7160241,6.74472009 13.7872198,6.916861 13.7870301,7.09629615 L13.7870301,7.21717398 Z M9.36707275,11.6371298 C9.36745493,11.816374 9.29651822,11.9884077 9.16990823,12.1152876 C9.04329824,12.2421676 8.87141602,12.3134701 8.69217147,12.3134701 L5.62129868,12.3134701 C5.44205413,12.3134701 5.2701719,12.2421676 5.14356191,12.1152876 C5.01695192,11.9884077 4.9460152,11.816374 4.94639585,11.6371298 L4.94639585,11.516252 C4.9460152,11.3370078 5.01695192,11.1649741 5.14356191,11.0380942 C5.2701719,10.9112142 5.44205413,10.8399113 5.62129868,10.8399113 L8.69145196,10.8399113 C8.8708871,10.8397205 9.04302801,10.9109162 9.16990789,11.0377961 C9.29678777,11.1646759 9.36798345,11.3368168 9.36779264,11.516252 L9.36707275,11.6371298 Z M17.2025471,21.0986992 C14.6496325,21.0992811 12.3477707,19.5618903 11.3704092,17.2034718 C10.3930477,14.8450533 10.9326819,12.130107 12.7376594,10.3247179 C14.5426368,8.51932884 17.25746,7.97907559 19.6161013,8.95589926 C21.9747426,9.93272293 23.5126583,12.2342341 23.5126583,14.7871488 C23.5090896,18.2711616 20.68584,21.0947331 17.2018276,21.0986992 L17.2025471,21.0986992 Z M17.2025471,9.65343812 C15.127028,9.65343812 13.2558779,10.9037007 12.4616111,12.8212303 C11.6673443,14.7387599 12.1063781,16.945932 13.5739918,18.4135457 C15.0416054,19.8811593 17.2487775,20.3201931 19.1663072,19.5259264 C21.0838368,18.7316596 22.3340993,16.8605094 22.3340993,14.7849903 C22.33053,11.9522277 20.0345911,9.65693259 17.2018276,9.65415763 L17.2025471,9.65343812 Z M16.7341455,14.3698325 L19.6496039,14.3698325 L19.6496039,15.2598675 L16.733426,15.2598675 L16.7341455,14.3698325 Z M16.7341455,12.3436896 L17.6241806,12.3436896 L17.6241806,15.259148 L16.733426,15.259148 L16.7341455,12.3436896 Z"></path>
          </g>
        </g>
      </g>
    </g>
  </svg>
)

const StyledPageHeader = styled.div`
  border-bottom: 1px solid ${({ theme }) => theme.colors.borderColor};
  padding: 24px;
`

const Details = styled.div`
  flex: 1;
`

const PageHeader = ({ title, description, children }: PageHeaderProps) => {
  const [onPresentSettings] = useModal(<SettingsModal />)
  const [onPresentRecentTransactions] = useModal(<RecentTransactionsModal />)

  return (
    <StyledPageHeader>
      <Flex alignItems="center">
        <Details>
          <Heading mb="8px" fontSize="32px" color="#25030A" style={{fontSize: '32px'}}>{title}</Heading>
          {description && (
            <Text color="#E8D9DB" fontSize="20px" fontWeight="400">
              {description}
            </Text>
          )}
        </Details>
        <IconButton variant="text" onClick={onPresentSettings} title="Settings">
          <CogIcon />
        </IconButton>
        <IconButton variant="text" onClick={onPresentRecentTransactions} title={<TranslatedText translationId={946}>Recent Transactions</TranslatedText>}>
          <HistoryIcon />
        </IconButton>
      </Flex>
      {children && <Text mt="16px">{children}</Text>}
    </StyledPageHeader>
  )
}

export default PageHeader
